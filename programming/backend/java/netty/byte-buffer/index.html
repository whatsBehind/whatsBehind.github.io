<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Byte Buffer | What&#39;s Behind</title>
<meta name="keywords" content="">
<meta name="description" content="Introduction Java ByteBuffer is a class in Java&rsquo;s java.nio package. It&rsquo;s used for reading and writing data to and from buffers efficiently. Buffers are blocks of memory that can store data temporarily. ByteBuffer is particularly useful when dealing with I/O operations and for high-performance applications. ðŸ“˜
ByteBuffer can be used in two modes:
Read Mode: You can read data from the buffer. ðŸ’¡ Write Mode: You can write data to the buffer.">
<meta name="author" content="">
<link rel="canonical" href="https://whatsBehind.github.io/programming/backend/java/netty/byte-buffer/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://whatsBehind.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://whatsBehind.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://whatsBehind.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://whatsBehind.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://whatsBehind.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Byte Buffer" />
<meta property="og:description" content="Introduction Java ByteBuffer is a class in Java&rsquo;s java.nio package. It&rsquo;s used for reading and writing data to and from buffers efficiently. Buffers are blocks of memory that can store data temporarily. ByteBuffer is particularly useful when dealing with I/O operations and for high-performance applications. ðŸ“˜
ByteBuffer can be used in two modes:
Read Mode: You can read data from the buffer. ðŸ’¡ Write Mode: You can write data to the buffer." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://whatsBehind.github.io/programming/backend/java/netty/byte-buffer/" /><meta property="article:section" content="programming" />
<meta property="article:published_time" content="2023-12-06T09:09:40-08:00" />
<meta property="article:modified_time" content="2023-12-06T09:09:40-08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Byte Buffer"/>
<meta name="twitter:description" content="Introduction Java ByteBuffer is a class in Java&rsquo;s java.nio package. It&rsquo;s used for reading and writing data to and from buffers efficiently. Buffers are blocks of memory that can store data temporarily. ByteBuffer is particularly useful when dealing with I/O operations and for high-performance applications. ðŸ“˜
ByteBuffer can be used in two modes:
Read Mode: You can read data from the buffer. ðŸ’¡ Write Mode: You can write data to the buffer."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Programmings",
      "item": "https://whatsBehind.github.io/programming/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Byte Buffer",
      "item": "https://whatsBehind.github.io/programming/backend/java/netty/byte-buffer/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Byte Buffer",
  "name": "Byte Buffer",
  "description": "Introduction Java ByteBuffer is a class in Java\u0026rsquo;s java.nio package. It\u0026rsquo;s used for reading and writing data to and from buffers efficiently. Buffers are blocks of memory that can store data temporarily. ByteBuffer is particularly useful when dealing with I/O operations and for high-performance applications. ðŸ“˜\nByteBuffer can be used in two modes:\nRead Mode: You can read data from the buffer. ðŸ’¡ Write Mode: You can write data to the buffer.",
  "keywords": [
    
  ],
  "articleBody": "Introduction Java ByteBuffer is a class in Javaâ€™s java.nio package. Itâ€™s used for reading and writing data to and from buffers efficiently. Buffers are blocks of memory that can store data temporarily. ByteBuffer is particularly useful when dealing with I/O operations and for high-performance applications. ðŸ“˜\nByteBuffer can be used in two modes:\nRead Mode: You can read data from the buffer. ðŸ’¡ Write Mode: You can write data to the buffer. ðŸ’¡ Practical Example // Create a new ByteBuffer ByteBuffer buffer = ByteBuffer.allocate(10); // Write data into the buffer buffer.put((byte) 10); buffer.put((byte) 20); // Flip the buffer to read mode buffer.flip(); // Read data from the buffer byte first = buffer.get(); byte second = buffer.get(); In this example, we first write two bytes into the buffer and then read them back.\nImportant Concepts and Operations Capacity, Limit, and Position: ByteBuffer has three important properties:\nCapacity: The maximum number of bytes it can hold. Itâ€™s set when the buffer is created and cannot be changed. Limit: The limit is the index of the first element that should not be read or written. It can change as you read/write data. Position: The next element to be read or written. Position will increase as you read or write data. Operations Create a new ByteBuffer\nByteBuffer buffer = ByteBuffer.allocate(10); Write ByteBuffer\nPut single byte ByteBuffer buffer = ByteBuffer.allocate(10); buffer.put((byte) 'a'); Put byte array ByteBuffer buffer = ByteBuffer.allocate(10); buffer.put(new byte[]{'a'}); Read ByteBuffer\nflip(): switch to read mode\nbuffer = ByteBuffer.allocate(10); buffer.put(new byte[]{'a', 'b', 'c', 'd'}); Here we create a new ByteBuffer, and write four bytes to the ByteBuffer. The ByteBuffer is still in write mode, and to switch to read mode, we can invoke flip() method.\nbuffer.flip(); flip() updates values of limit and position\nthis.limit = position; this.position = 0; get(): read one byte and increment position\nbuffer.flip(); char data = (char) buffer.get(); get(int i): read byte of index w/o position change\nbuffer.flip(); char data = (char) buffer.get(0); // 'a' pointer position doesnâ€™t increment Manipulate position pointer\nrewind(): reset position back to 0\nByteBuffer buffer = ByteBuffer.allocate(10); buffer.put(new byte[]{'a', 'b', 'c', 'd'}); buffer.rewind(); rewind() only does one thing that is to reset position to 0. After rewind, you can write/read from the beginning of the ByteBuffer\nmark() and reset(): bookmark position and re-visit\nByteBuffer buffer = ByteBuffer.allocate(10); buffer.put(new byte[]{'a', 'b', 'c', 'd'}); buffer.flip(); buffer.get(); buffer.get(); buffer.mark(); buffer.get(); buffer.get(); buffer.reset(); mark() and reset() introduce a new pointer mark in ByteBuffer, and the two methods are normally used together. Value of mark in most case is -1. When mark() is invoked, current position will be remembered by assigning position to mark\nIn above code snippet, after remembering position (mark()), we continue read two more bytes from the ByteBuffer where position is 4. reset() resets position to previous mark which is 2.\nComparing to rewind() which can only reset position to 0, mark() and reset() have enhanced feature which bookmarks position and resets position to previous mark\nWork with Channel\nChannel\nChannel is an important component in NIO, and it is like Stream in BIO. Different from Stream, Channel can be used bi-directional and can be used in conjunction with Buffer\nWhen Using Channel and Buffer, data can be read from a Channel into a Buffer or written from a Buffer into a Channel ",
  "wordCount" : "547",
  "inLanguage": "en",
  "datePublished": "2023-12-06T09:09:40-08:00",
  "dateModified": "2023-12-06T09:09:40-08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://whatsBehind.github.io/programming/backend/java/netty/byte-buffer/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "What's Behind",
    "logo": {
      "@type": "ImageObject",
      "url": "https://whatsBehind.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://whatsBehind.github.io/" accesskey="h" title="What&#39;s Behind (Alt + H)">What&#39;s Behind</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Byte Buffer
    </h1>
    <div class="post-meta"><span title='2023-12-06 09:09:40 -0800 PST'>December 6, 2023</span>

</div>
  </header> 
  <div class="post-content"><h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>Java ByteBuffer is a class in Java&rsquo;s java.nio package. It&rsquo;s used for reading and writing data to and from buffers efficiently. Buffers are blocks of memory that can store data temporarily. ByteBuffer is particularly useful when dealing with I/O operations and for high-performance applications. ðŸ“˜</p>
<p>ByteBuffer can be used in two modes:</p>
<ul>
<li>Read Mode: You can read data from the buffer. ðŸ’¡</li>
<li>Write Mode: You can write data to the buffer. ðŸ’¡</li>
</ul>
<h3 id="practical-example">Practical Example<a hidden class="anchor" aria-hidden="true" href="#practical-example">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#75715e">// Create a new ByteBuffer</span>
</span></span><span style="display:flex;"><span>ByteBuffer buffer <span style="color:#f92672">=</span> ByteBuffer.<span style="color:#a6e22e">allocate</span>(10);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Write data into the buffer</span>
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">put</span>((<span style="color:#66d9ef">byte</span>) 10);
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">put</span>((<span style="color:#66d9ef">byte</span>) 20);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Flip the buffer to read mode</span>
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">flip</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Read data from the buffer</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">byte</span> first <span style="color:#f92672">=</span> buffer.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">byte</span> second <span style="color:#f92672">=</span> buffer.<span style="color:#a6e22e">get</span>();
</span></span></code></pre></div><p>In this example, we first write two bytes into the buffer and then read them back.</p>
<h2 id="important-concepts-and-operations">Important Concepts and Operations<a hidden class="anchor" aria-hidden="true" href="#important-concepts-and-operations">#</a></h2>
<ul>
<li>
<p>Capacity, Limit, and Position: ByteBuffer has three important properties:</p>
<ul>
<li>Capacity: The maximum number of bytes it can hold. It&rsquo;s set when the buffer is created and cannot be changed.</li>
<li>Limit: The limit is the index of the first element that should not be read or written. It can change as you read/write data.</li>
<li>Position: The next element to be read or written. Position will increase as you read or write data.</li>
</ul>
</li>
</ul>
<h3 id="operations">Operations<a hidden class="anchor" aria-hidden="true" href="#operations">#</a></h3>
<ul>
<li>
<p>Create a new <code>ByteBuffer</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>ByteBuffer buffer <span style="color:#f92672">=</span> ByteBuffer.<span style="color:#a6e22e">allocate</span>(10);
</span></span></code></pre></div><p><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/new-byte-buffer.png" alt="image"  />
</p>
</li>
<li>
<p>Write <code>ByteBuffer</code></p>
<ul>
<li>Put single byte
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>ByteBuffer buffer <span style="color:#f92672">=</span> ByteBuffer.<span style="color:#a6e22e">allocate</span>(10);
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">put</span>((<span style="color:#66d9ef">byte</span>) <span style="color:#e6db74">&#39;a&#39;</span>);
</span></span></code></pre></div></li>
<li>Put byte array
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>ByteBuffer buffer <span style="color:#f92672">=</span> ByteBuffer.<span style="color:#a6e22e">allocate</span>(10);
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">put</span>(<span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span>{<span style="color:#e6db74">&#39;a&#39;</span>});
</span></span></code></pre></div><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/write-single-byte.png" alt="image"  />
</li>
</ul>
</li>
<li>
<p>Read <code>ByteBuffer</code></p>
<ul>
<li>
<p><code>flip()</code>: switch to read mode</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>buffer <span style="color:#f92672">=</span> ByteBuffer.<span style="color:#a6e22e">allocate</span>(10);
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">put</span>(<span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span>{<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>});
</span></span></code></pre></div><p><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/write-four-bytes.png" alt="image"  />
</p>
<p>Here we create a new <code>ByteBuffer</code>, and write four bytes to the <code>ByteBuffer</code>. The <code>ByteBuffer</code> is still in write mode, and to switch to read mode, we can invoke <code>flip()</code> method.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">flip</span>();
</span></span></code></pre></div><p><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/flip.png" alt="image"  />
</p>
<p><code>flip()</code> updates values of <code>limit</code> and <code>position</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">limit</span> <span style="color:#f92672">=</span> position;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span> <span style="color:#f92672">=</span> 0;
</span></span></code></pre></div></li>
<li>
<p><code>get()</code>: read one byte and increment position</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">flip</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> data <span style="color:#f92672">=</span> (<span style="color:#66d9ef">char</span>) buffer.<span style="color:#a6e22e">get</span>();
</span></span></code></pre></div><p><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/get.png" alt="image"  />
</p>
</li>
<li>
<p><code>get(int i)</code>: read byte of index w/o position change</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">flip</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> data <span style="color:#f92672">=</span> (<span style="color:#66d9ef">char</span>) buffer.<span style="color:#a6e22e">get</span>(0); <span style="color:#75715e">// &#39;a&#39;</span>
</span></span></code></pre></div><p>pointer <code>position</code> doesn&rsquo;t increment
<img loading="lazy" src="/programming/backend/java/netty/byte-buffer/get-index.png" alt="image"  />
</p>
</li>
</ul>
</li>
<li>
<p>Manipulate <code>position</code> pointer</p>
<ul>
<li>
<p><code>rewind()</code>: reset position back to 0</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>ByteBuffer buffer <span style="color:#f92672">=</span> ByteBuffer.<span style="color:#a6e22e">allocate</span>(10);
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">put</span>(<span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span>{<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>});
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">rewind</span>();
</span></span></code></pre></div><p><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/rewind.png" alt="image"  />
</p>
<p><code>rewind()</code> only does one thing that is to reset <code>position</code> to 0. After rewind, you can write/read from the beginning of the <code>ByteBuffer</code></p>
</li>
<li>
<p><code>mark()</code> and <code>reset()</code>: bookmark position and re-visit</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>ByteBuffer buffer <span style="color:#f92672">=</span> ByteBuffer.<span style="color:#a6e22e">allocate</span>(10);
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">put</span>(<span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span>{<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>});
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">flip</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">mark</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>buffer.<span style="color:#a6e22e">reset</span>();
</span></span></code></pre></div><p><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/mark.png" alt="image"  />
</p>
<p><code>mark()</code> and <code>reset()</code> introduce a new pointer <code>mark</code> in ByteBuffer, and the two methods are normally used together. Value of <code>mark</code> in most case is <code>-1</code>. When <code>mark()</code> is invoked, current <code>position</code> will be remembered by assigning <code>position</code> to <code>mark</code></p>
<p><img loading="lazy" src="/programming/backend/java/netty/byte-buffer/reset.png" alt="image"  />
</p>
<p>In above code snippet, after remembering <code>position</code> (<code>mark()</code>), we continue read two more bytes from the <code>ByteBuffer</code> where <code>position</code> is <code>4</code>. <code>reset()</code> resets <code>position</code> to previous <code>mark</code> which is <code>2</code>.</p>
<p>Comparing to <code>rewind()</code> which can only reset <code>position</code> to <code>0</code>, <code>mark()</code> and <code>reset()</code> have enhanced feature which bookmarks <code>position</code> and resets <code>position</code> to previous <code>mark</code></p>
</li>
</ul>
</li>
<li>
<p>Work with <code>Channel</code></p>
<ul>
<li>
<p><code>Channel</code></p>
<p><code>Channel</code> is an important component in NIO, and it is like <code>Stream</code> in BIO. Different from <code>Stream</code>, <code>Channel</code> can be used bi-directional and can be used in conjunction with <code>Buffer</code></p>
<p>When Using <code>Channel</code> and <code>Buffer</code>, data can be read from a <code>Channel</code> into a <code>Buffer</code> or written from a <code>Buffer</code> into a <code>Channel</code>
<img loading="lazy" src="/programming/backend/java/netty/byte-buffer/channel-and-buffer.png" alt="image"  />
</p>
</li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://whatsBehind.github.io/">What&#39;s Behind</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
