<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Cookie | What&#39;s Behind</title>
<meta name="keywords" content="">
<meta name="description" content="What is cookie An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to a user&rsquo;s web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browser—keeping a user logged in, for example. It remembers stateful information for the stateless HTTP protocol.">
<meta name="author" content="">
<link rel="canonical" href="https://whatsBehind.github.io/programming/web/http/cookie/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://whatsBehind.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://whatsBehind.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://whatsBehind.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://whatsBehind.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://whatsBehind.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Cookie" />
<meta property="og:description" content="What is cookie An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to a user&rsquo;s web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browser—keeping a user logged in, for example. It remembers stateful information for the stateless HTTP protocol." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://whatsBehind.github.io/programming/web/http/cookie/" /><meta property="article:section" content="programming" />
<meta property="article:published_time" content="2023-10-27T08:10:45-07:00" />
<meta property="article:modified_time" content="2023-10-27T08:10:45-07:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cookie"/>
<meta name="twitter:description" content="What is cookie An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to a user&rsquo;s web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browser—keeping a user logged in, for example. It remembers stateful information for the stateless HTTP protocol."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Programmings",
      "item": "https://whatsBehind.github.io/programming/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Cookie",
      "item": "https://whatsBehind.github.io/programming/web/http/cookie/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Cookie",
  "name": "Cookie",
  "description": "What is cookie An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to a user\u0026rsquo;s web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browser—keeping a user logged in, for example. It remembers stateful information for the stateless HTTP protocol.",
  "keywords": [
    
  ],
  "articleBody": "What is cookie An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to a user’s web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browser—keeping a user logged in, for example. It remembers stateful information for the stateless HTTP protocol.\nCookies are created by server Cookies are stored in client’s browser Cookies are sent with every request to the same domain (Explain more below) Deprecation of cookie Cookies were once used for general client-side storage. While this made sense when they were the only way to store data on the client, modern storage APIs are now recommended. Cookies are sent with every request, so they can worsen performance (especially for mobile data connections). Modern APIs for client storage are the Web Storage API (localStorage and sessionStorage) and IndexedDB.\nUse case of cookie Session management Logins, shopping carts, game scores, or anything else the server should remember\nPersonalization User preferences, themes, and other settings\nYou visited a weather website and entered your address to get weather information. The server set an address cookie under the domain of the weather website. Next time when you revisit the website, the address cookie will be sent in the request’s header, and the website will show weather information of same address. Tracking Recording and analyzing user behavior (ADs)\nHow to set cookies Cookies can be set and modified at the server level using\nthe Set-Cookie HTTP header, or with JavaScript using document.cookie. After receiving an HTTP request, a server can send one or more Set-Cookie headers with the response. The browser usually stores the cookie and sends it with requests made to the same server inside a Cookie HTTP header.\nSet-Cookie and Cookie headers The Set-Cookie HTTP response header sends cookies from the server to the user agent. A simple cookie is set like this:\nSet-Cookie: = Example:\nHTTP/2.0 200 OK Content-Type: text/html Set-Cookie: yummy_cookie=choco Set-Cookie: tasty_cookie=strawberry [page content] Define the lifecycle of a cookie The lifetime of a cookie can be defined in two ways:\nSession cookies are deleted when the current session ends. The browser defines when the “current session” ends, and some browsers use session restoring when restarting. This can cause session cookies to last indefinitely. Permanent cookies are deleted at a date specified by the Expires attribute, or after a period of time specified by the Max-Age attribute. Example: Set-Cookie: id=a3fWa; Expires=Thu, 31 Oct 2021 07:28:00 GMT; Restrict access to cookies Secure attribute A cookie with the Secure attribute is only sent to the server with an encrypted request over the HTTPS protocol. HttpOnly attribute A cookie with the HttpOnly attribute is inaccessible to the JavaScript Document.cookie API; it’s only sent to the server. For example, cookies that persist in server-side sessions don’t need to be available to JavaScript and should have the HttpOnly attribute. This precaution helps mitigate cross-site scripting (XSS) attacks. Example: Set-Cookie: id=a3fWa; Expires=Thu, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly Define where cookies are sent The Domain and Path attributes define the scope of a cookie: what URLs the cookies should be sent to.\nDomain attribute The Domain attribute specifies which hosts can receive a cookie. If the server does not specify a Domain, the browser defaults the domain to the same host that set the cookie, excluding subdomains. If Domain is specified, then subdomains are always included. Therefore, specifying Domain is less restrictive than omitting it. However, it can be helpful when subdomains need to share information about a user.\nFor example, if you set Domain=mozilla.org, cookies are available on domains like\nmozilla.orgdeveloper.mozilla.org If the the cookie was set by server with domain example.com, and no domain attribute was specified. Then the cookie will only be send to domain example.com.\nPath attribute The Path attribute indicates a URL path that must exist in the requested URL in order to send the Cookie header. The (\"/\") character is considered a directory separator, and subdirectories match as well. For example, if you set Path=/docs, these request paths match:\n/docs/docs//docs/Web//docs/Web/HTTP But these request paths don’t:\n//docsets/fr/docs TODO There are still some other attributes and concepts regarding cookie, will dive deeper later is necessary Attach some picture about Set-Cookie and Cookie headers, and attributes of a cookie Dive deeper for HttpOnly attribute Reference Cookie Definition Nice YouTube video ",
  "wordCount" : "741",
  "inLanguage": "en",
  "datePublished": "2023-10-27T08:10:45-07:00",
  "dateModified": "2023-10-27T08:10:45-07:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://whatsBehind.github.io/programming/web/http/cookie/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "What's Behind",
    "logo": {
      "@type": "ImageObject",
      "url": "https://whatsBehind.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://whatsBehind.github.io/" accesskey="h" title="What&#39;s Behind (Alt + H)">What&#39;s Behind</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Cookie
    </h1>
    <div class="post-meta"><span title='2023-10-27 08:10:45 -0700 PDT'>October 27, 2023</span>

</div>
  </header> 
  <div class="post-content"><h3 id="what-is-cookie">What is cookie<a hidden class="anchor" aria-hidden="true" href="#what-is-cookie">#</a></h3>
<p>An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to a user&rsquo;s web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browser—keeping a user logged in, for example. It remembers stateful information for the stateless HTTP protocol.</p>
<ul>
<li>Cookies are created by server</li>
<li>Cookies are stored in client&rsquo;s browser</li>
<li>Cookies are sent with every request to the same domain (Explain more below)</li>
</ul>
<h3 id="deprecation-of-cookie">Deprecation of cookie<a hidden class="anchor" aria-hidden="true" href="#deprecation-of-cookie">#</a></h3>
<p>Cookies were once used for general client-side storage. While this made sense when they were the only way to store data on the client, modern storage APIs are now recommended. Cookies are sent with every request, so they can worsen performance (especially for mobile data connections). Modern APIs for client storage are the Web Storage API (localStorage and sessionStorage) and IndexedDB.</p>
<h3 id="use-case-of-cookie">Use case of cookie<a hidden class="anchor" aria-hidden="true" href="#use-case-of-cookie">#</a></h3>
<p>Session management
Logins, shopping carts, game scores, or anything else the server should remember</p>
<p>Personalization
User preferences, themes, and other settings</p>
<ul>
<li>You visited a weather website and entered your address to get weather information. The server set an address cookie under the domain of the weather website. Next time when you revisit the website, the address cookie will be sent in the request&rsquo;s header, and the website will show weather information of same address.</li>
</ul>
<p>Tracking
Recording and analyzing user behavior (ADs)</p>
<h3 id="how-to-set-cookies">How to set cookies<a hidden class="anchor" aria-hidden="true" href="#how-to-set-cookies">#</a></h3>
<p>Cookies can be set and modified at the server level using</p>
<ul>
<li>the Set-Cookie HTTP header,</li>
<li>or with JavaScript using document.cookie.</li>
</ul>
<p>After receiving an HTTP request, a server can send one or more Set-Cookie headers with the response. The browser usually stores the cookie and sends it with requests made to the same server inside a Cookie HTTP header.</p>
<h3 id="set-cookie-and-cookie-headers"><code>Set-Cookie</code> and <code>Cookie</code> headers<a hidden class="anchor" aria-hidden="true" href="#set-cookie-and-cookie-headers">#</a></h3>
<p>The <code>Set-Cookie</code> HTTP <strong>response header</strong> sends cookies from the server to the user agent. A simple cookie is set like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTTP" data-lang="HTTP"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;
</span></span></span></code></pre></div><p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTTP" data-lang="HTTP"><span style="display:flex;"><span><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2.0</span> <span style="color:#ae81ff">200</span> <span style="color:#a6e22e">OK</span>
</span></span><span style="display:flex;"><span>Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">text/html</span>
</span></span><span style="display:flex;"><span>Set-Cookie<span style="color:#f92672">:</span> <span style="color:#ae81ff">yummy_cookie=choco</span>
</span></span><span style="display:flex;"><span>Set-Cookie<span style="color:#f92672">:</span> <span style="color:#ae81ff">tasty_cookie=strawberry</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">[page</span> <span style="color:#ae81ff">content]</span>
</span></span></code></pre></div><h3 id="define-the-lifecycle-of-a-cookie">Define the lifecycle of a cookie<a hidden class="anchor" aria-hidden="true" href="#define-the-lifecycle-of-a-cookie">#</a></h3>
<p>The lifetime of a cookie can be defined in two ways:</p>
<ul>
<li>Session cookies are deleted when the current session ends. The browser defines when the &ldquo;current session&rdquo; ends, and some browsers use session restoring when restarting. This can cause session cookies to last indefinitely.</li>
<li>Permanent cookies are deleted at a date specified by the Expires attribute, or after a period of time specified by the Max-Age attribute.
Example:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTTP" data-lang="HTTP"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Set-Cookie: id=a3fWa; Expires=Thu, 31 Oct 2021 07:28:00 GMT;
</span></span></span></code></pre></div><h3 id="restrict-access-to-cookies">Restrict access to cookies<a hidden class="anchor" aria-hidden="true" href="#restrict-access-to-cookies">#</a></h3>
<ul>
<li><code>Secure</code> attribute
A cookie with the Secure attribute is only sent to the server with an encrypted request over the HTTPS protocol.</li>
<li><code>HttpOnly</code> attribute
A cookie with the HttpOnly attribute is inaccessible to the JavaScript Document.cookie API; it&rsquo;s only sent to the server. For example, cookies that persist in server-side sessions don&rsquo;t need to be available to JavaScript and should have the HttpOnly attribute. This precaution helps mitigate cross-site scripting (XSS) attacks.
Example:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTTP" data-lang="HTTP"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Set-Cookie: id=a3fWa; Expires=Thu, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly
</span></span></span></code></pre></div><h3 id="define-where-cookies-are-sent">Define where cookies are sent<a hidden class="anchor" aria-hidden="true" href="#define-where-cookies-are-sent">#</a></h3>
<p>The Domain and Path attributes define the scope of a cookie: what URLs the cookies should be sent to.</p>
<h4 id="domain-attribute">Domain attribute<a hidden class="anchor" aria-hidden="true" href="#domain-attribute">#</a></h4>
<p>The Domain attribute specifies which hosts can receive a cookie. If the server does not specify a Domain, the browser defaults the domain to the same host that set the cookie, excluding subdomains. If Domain is specified, then subdomains are always included. Therefore, specifying Domain is less restrictive than omitting it. However, it can be helpful when subdomains need to share information about a user.</p>
<p>For example, if you set <code>Domain=mozilla.org</code>, cookies are available on domains like</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTTP" data-lang="HTTP"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">mozilla.orgdeveloper.mozilla.org
</span></span></span></code></pre></div><p>If the the cookie was set by server with domain <code>example.com</code>, and no <code>domain</code> attribute was specified. Then the cookie will only be send to domain <code>example.com</code>.</p>
<h4 id="path-attribute">Path attribute<a hidden class="anchor" aria-hidden="true" href="#path-attribute">#</a></h4>
<p>The Path attribute indicates a URL path that must exist in the requested URL in order to send the <code>Cookie</code> header. The <code>(&quot;/&quot;)</code> character is considered a directory separator, and subdirectories match as well.
For example, if you set <code>Path=/docs</code>, these request paths match:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTTP" data-lang="HTTP"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">/docs/docs//docs/Web//docs/Web/HTTP
</span></span></span></code></pre></div><p>But these request paths don&rsquo;t:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTTP" data-lang="HTTP"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">//docsets/fr/docs
</span></span></span></code></pre></div><h3 id="todo">TODO<a hidden class="anchor" aria-hidden="true" href="#todo">#</a></h3>
<ul>
<li><code>There are still some other attributes and concepts regarding cookie, will dive deeper later is necessary</code></li>
<li><code>Attach some picture about Set-Cookie and Cookie headers, and attributes of a cookie</code></li>
<li><code>Dive deeper for HttpOnly attribute</code></li>
</ul>
<h3 id="reference">Reference<a hidden class="anchor" aria-hidden="true" href="#reference">#</a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies">Cookie Definition</a></li>
<li><a href="https://www.youtube.com/watch?v=V0pzXU6FbQA">Nice YouTube video</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://whatsBehind.github.io/">What&#39;s Behind</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
